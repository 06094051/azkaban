<h2 id="webserver-setup">WebServer Setup</h2>

<p>Azkaban Web Server handles project management, authentication, scheduling and trigger of executions.</p>
<hr />
<h3 id='installing_the_web_server'>Installing the Web Server</h3>

<p>Grab the azkaban-web-server package from the <a href='../../downloads.html'>download page</a>.</p>

<p>Alternatively, by cloning the <a href='https://github.com/azkaban/azkaban2'>github repo</a>, you can run <strong>ant -package-all</strong> build the latest version from master.</p>

<p>Extract the package into a directory. The install path should be different from the AzkabanExecutorServer.</p>

<p>After extraction, there should be the following directories.</p>
<br /><table class='params'><thead><tr><th>Folder</th><th>Description</th></tr></thead><tbody><tr><td style='text-align: left;'>bin</td><td style='text-align: left;'>The scripts to start Azkaban jetty server</td>
</tr><tr><td style='text-align: left;'>conf</td><td style='text-align: left;'>The configurations for Azkaban web server</td>
</tr><tr><td style='text-align: left;'>lib</td><td style='text-align: left;'>The jar dependencies for Azkaban</td>
</tr><tr><td style='text-align: left;'>extlib</td><td style='text-align: left;'>Additional jars that are added to extlib will be added to Azkaban&#8217;s classpath</td>
</tr><tr><td style='text-align: left;'>plugins</td><td style='text-align: left;'>the directory where plugins can be installed</td>
</tr><tr><td style='text-align: left;'>web</td><td style='text-align: left;'>The web (css, javascript, image) files for Azkaban web server.</td>
</tr></tbody></table>
<p>In the <em>conf</em> directory, there should be three files</p>

<ul>
<li><strong>azkaban.properties</strong> - Used by Azkaban for runtime parameters</li>

<li><strong>global.properties</strong> - Global static properties that are passed as shared properties to every workflow and job.</li>

<li><strong>azkaban-users.xml</strong> - Used to add users and roles for authentication. This file is not used if the XmLUserManager is not set up to use it.</li>
</ul>

<p>The <em>azkaban.properties</em> file will be the main configuration file that is necessary to setup Azkaban.</p>
<hr />
<h3 id='getting_keystore_for_ssl'>Getting KeyStore for SSL</h3>

<p>Azkaban uses SSL socket connectors, which means a keystore will have to be available. You call follow the steps provided at this link (<a href='http://docs.codehaus.org/display/JETTY/How+to+configure+SSL'>http://docs.codehaus.org/display/JETTY/How+to+configure+SSL</a>) to create one. Once a keystore file has been created, Azkaban must be given its location and password. Within <em>azkaban.properties</em>, the following properties should be overridden. <pre class='code'>
jetty.keystore=keystore
jetty.password=password
jetty.keypassword=password
jetty.truststore=keystore
jetty.trustpassword=password
</pre></p>
<hr />
<h3 id='setting_up_the_db'>Setting up the DB</h3>

<p>If you haven&#8217;t gotten the MySQL JDBC driver, you can get it from this link: <a href='http://www.mysql.com/downloads/connector/j/'>http://www.mysql.com/downloads/connector/j/</a>. Drop this jar into the <em>extlib</em> directory. All external dependencies should be added to the extlib directory.</p>

<p>To point Azkaban web client to the MySQL instance, you will need to add the connection parameters to <em>azkaban.properties</em>.</p>
<pre class='code'>
database.type=mysql
mysql.port=3306
mysql.host=localhost
mysql.database=azkaban
mysql.user=azkaban
mysql.password=azkaban
mysql.numconnections=100
</pre>
<p>Currently MySQL is the only data store type supported in Azkaban. So <em>database.type</em> should always be <em>mysql</em>.</p>
<hr />
<h3 id='setting_up_the_usermanager'>Setting up the UserManager</h3>

<p>Azkaban uses the UserManager to provide authentication and user roles. By default, Azkaban includes and uses the <em>XmlUserManager</em> which gets username/passwords and roles from the <em>azkaban-users.xml</em> as can be seen in the <em>azkaban.properties</em> file.</p>

<ul>
<li><code>user.manager.class=azkaban.user.XmlUserManager</code></li>

<li><code>user.manager.xml.file=conf/azkaban-users.xml</code></li>
</ul>
<hr />
<h3 id='running_web_server'>Running Web Server</h3>

<p>The following properties in <em>azkaban.properties</em> are used to configure jetty. <pre class='code'>
jetty.maxThreads=25
jetty.ssl.port=8443
</pre></p>

<p>Execute <em>bin/azkaban-web-start.sh</em> to start AzkabanWebServer. To shutdown the AzkabanWebServer, run <em>bin/azkaban-web-shutdown.sh</em></p>

<p>You can test access by accessing the web server through a browser.</p>
