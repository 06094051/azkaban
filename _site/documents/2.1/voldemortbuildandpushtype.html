<!DOCTYPE html> 
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title></title>

				<link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.css" rel="stylesheet">
		<link href="/css/azkaban.css" rel="stylesheet">

		<script type="text/javascript" src="/js/jquery-1.9.1.js"></script>    
		<script type="text/javascript" src="/js/bootstrap.min.js"></script>    


	</head>
	<body>
		    <script type="text/javascript">
      function navMenuClick(url) {
        window.location.href = url;
      }
    </script>
    <div class="navbar navbar-inverse navbar-static-top">
      <div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<div class="navbar-logo">
						<a href="/">Azkaban</a>
					</div>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
						<li onClick="navMenuClick('overview.html')"><a href="overview.html">Overview</a></li>
						<li class="active" onClick="navMenuClick('/')"><a href="/">Documentation</a></li>
						<li onClick="navMenuClick('downloads.html')"><a href="downloads.html">Downloads</a></li>
						<li onClick="navMenuClick('license.html')"><a href="license.html">License</a></li>
						<li onClick="navMenuClick('contact.html')"><a href="contact.html">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>



		<div class="az-page-header">
			<div class="container">
				<div class="row">
					<div class="col-lg-12">
						<h1></h1>
					</div>
				</div>
			</div>
		</div>

		<div class="container">
			<div class="row">
				<div class="col-md-3">
										<div class="bs-sidebar hidden-print" role="complementary">
						<ul class="bs-sidenav nav">
							<li>
								<a href="#getting-started">Getting Started</a>
								<ul class="nav">
									<li><a href="#database-setup">Database Setup</a></li>
									<li><a href="#webserver-setup">Web Server Setup</a></li>
									<li><a href="#executor-setup">Executor Setup</a></li>
									<li><a href="#plugin-setup">Plugin Setup</a></li>
									<li><a href="#upgrade-21">Upgrade from 2.1</a></li>
								</ul>
							</li>
							<li>
								<a href="#configuration">Configuration</a>
								<ul class="nav">
									<li><a href="#azkaban-webserver">AzkabanWebServer</a></li>
									<li><a href="#azkaban-execserver">AzkabanExecutorServer</a></li>
								</ul>
							</li>
							<li>
								<a href="#user-manager">User Manager</a>
								<ul class="nav">
									<li><a href="#xml-usermanager">XmlUserManager</a></li>
									<li><a href="#custom-usermanager">Custom UserManager</a></li>
								</ul>
							</li>
							<li>
								<a href="#creating-flows">Creating Flows</a>
								<ul class="nav">
									<li><a href="#job-conf">Job Configuration</a></li>
									<li><a href="#builtin-jobtypes">Built-in JobTypes</a></li>
								</ul>
							</li>
							<li>
								<a href="#using-azkaban">Using Azkaban</a>
								<ul class="nav">
									<li><a href="#create-projects">Create Projects</a></li>
									<li><a href="#upload-projects">Upload Projects</a></li>
									<li><a href="#flow-view">Flow View</a></li>
									<li><a href="#project-permissions">Project Permissions</a></li>
									<li><a href="#executing-flows">Executing Flows</a></li>
									<li><a href="#executions">Executions</a></li>
									<li><a href="#job-page">Job Page</a></li>
									<li><a href="#ajax-api">AJAX API</a></li>
								</ul>
							</li>
							<li>
								<a href="#plugins">Plugins</a>
								<ul class="nav">
									<li><a href="#hadoopsecuritymanager">HadoopSecurityManager</a></li>
									<li><a href="#hdfs-browser">HDFS Browser</a></li>
									<li><a href="#jobtype-plugins">JobType Plugins</a></li>
									<li>
										<a href="#jobtypes">JobTypes</a>
										<ul class="nav">
											<li><a href="#command-type">Command</a></li>
											<li><a href="#java-type">Java</a></li>
											<li><a href="#hadoopjava-type">Hadoop Java</a></li>
											<li><a href="#pig-type">Pig</a></li>
											<li><a href="#hive-type">Hive</a></li>
											<li><a href="#voldemortbuildandpush-type">VoldemortBuildAndPush</a></li>
											<li><a href="#create-types">Create Types</a></li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div>


				</div>
				<div class="col-md-9">
					<h1 id="voldemortbuildandpush_type">VoldemortBuildandPush Type</h1>

<p>Pushing data from hadoop to voldemort store used to be entirely in java. This created lots of problems, mostly due to users having to keep track of jars and dependencies and keep them up-to-date. We created the “VoldemortBuildandPush” job type to address this problem. Jars and dependencies are now managed by admins; absolutely no jars or java code are required from users.</p>

<h2 id="howtouse">How-To-Use</h2>

<p>This is essentially a hadoopJava job, with all jars controlled by the admins. User only need to provide a .job file for the job and specify all the parameters. The following needs to be specified:</p>
<table class="params"><thead><tr><th class="parameter">Parameter</th><th class="description"> Description</th></tr></thead><tbody><tr><td style="text-align: left;">type</td><td style="text-align: left;">The type name as set by the admin, e.g. “VoldemortBuildandPush”</td></tr>
<tr><td style="text-align: left;">push.store.name</td><td style="text-align: left;">The voldemort push store name</td></tr>
<tr><td style="text-align: left;">push.store.owners</td><td style="text-align: left;">The push store owners</td></tr>
<tr><td style="text-align: left;">push.store.description</td><td style="text-align: left;">Push store description</td></tr>
<tr><td style="text-align: left;">build.input.path</td><td style="text-align: left;">Build input path on hdfs</td></tr>
<tr><td style="text-align: left;">build.output.dir</td><td style="text-align: left;">Build output path on hdfs</td></tr>
<tr><td style="text-align: left;">build.replication.factor</td><td style="text-align: left;">replication factor number</td></tr>
<tr><td style="text-align: left;">user.to.proxy</td><td style="text-align: left;">The hadoop user this job should run under.</td></tr>
<tr><td style="text-align: left;">build.type.avro</td><td style="text-align: left;">if build and push avro data, true, otherwise, false</td></tr>
<tr><td style="text-align: left;">avro.key.field</td><td style="text-align: left;">if using avro data, key field</td></tr>
<tr><td style="text-align: left;">avro.value.field</td><td style="text-align: left;">if using avro data, value field</td></tr>
</tbody></table>
<p>Here are what’s needed and normally configured by the admn (always put common properties in commonprivate.properties and common.properties for all job types)</p>

<p>These go into private.properties</p>
<table class="params"><thead><tr><th class="parameter">Parameter</th><th class="description"> Description</th></tr></thead><tbody><tr><td style="text-align: left;">hadoop.security.manager.class</td><td style="text-align: left;">The class that handles talking to hadoop clusters.</td></tr>
<tr><td style="text-align: left;">azkaban.should.proxy</td><td style="text-align: left;">Whether Azkaban should proxy as individual user hadoop accounts.</td></tr>
<tr><td style="text-align: left;">proxy.user</td><td style="text-align: left;">The Azkaban user configured with kerberos and hadoop, for secure clusters.</td></tr>
<tr><td style="text-align: left;">proxy.keytab.location</td><td style="text-align: left;">The location of the keytab file with which Azkaban can authenticate with Kerberos for the specified proxy.user</td></tr>
<tr><td style="text-align: left;">hadoop.home</td><td style="text-align: left;">The hadoop home where the jars and conf resources are installed.</td></tr>
<tr><td style="text-align: left;">jobtype.classpath</td><td style="text-align: left;">The items that every such job should have on its classpath.</td></tr>
<tr><td style="text-align: left;">jobtype.class</td><td style="text-align: left;">Should be set to <em>azkaban.jobtype.HadoopJavaJob</em></td></tr>
<tr><td style="text-align: left;">obtain.binary.token</td><td style="text-align: left;">Whether Azkaban should request tokens. Set this to true for secure clusters.</td></tr>
<tr><td style="text-align: left;">azkaban.no.user.classpath</td><td style="text-align: left;">Set to true such that Azkaban doesn’t pick up user supplied jars.</td></tr>
</tbody></table>
<p>These go into plugin.properties</p>
<table class="params"><thead><tr><th class="parameter">Parameter</th><th class="description"> Description</th></tr></thead><tbody><tr><td style="text-align: left;">job.class</td><td style="text-align: left;">voldemort.store.readonly.mr.azkaban.VoldemortBuildAndPushJob</td></tr>
<tr><td style="text-align: left;">voldemort.fetcher.protocol</td><td style="text-align: left;">webhdfs</td></tr>
<tr><td style="text-align: left;">hdfs.default.classpath.dir</td><td style="text-align: left;">HDFS location for distributed cache</td></tr>
<tr><td style="text-align: left;">hdfs.default.classpath.dir.enable</td><td style="text-align: left;">set to true if using distributed cache to ship dependency jars</td></tr>
</tbody></table>
<p>Please refer to voldemort project site for more info: <a href="http://www.project-voldemort.com/voldemort/">project voldemort</a></p>
				</div>
			</div>
		</div>

		<script>
			$(function(){
				$(document.body).scrollspy({
					target: '.bs-sidebar'
				});
			 // back to top
				setTimeout(function () {
					var $sideBar = $('.bs-sidebar')
					$sideBar.affix({
						offset: {
							top: function () {
								var navOuterHeight = $('.navbar').height();
								var headerHeight = $('.az-page-header').height();

								return (this.top = navOuterHeight + headerHeight);
							},
							bottom: function () {
								return (this.bottom = $('.page-footer').outerHeight(true));
							}
						}
					});
				}, 100)
			});
		</script>

				<div class="page-footer">
			<div class="container">
				<div class="row">
					<div class="col-xs-12">
						<ul class="footer-nav">
							<li><a href="/">Documentation</a></li>
							<li><a href="downloads.html">Downloads</a></li>
							<li><a href="https://github.com/azkaban/azkaban2/issues">Issues</a></li>
							<li><a href="https://github.com/azkaban/azkaban2">Repository</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>


	</body>
</html>

