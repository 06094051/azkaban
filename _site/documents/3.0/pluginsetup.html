<!DOCTYPE html> 
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title></title>

				<link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.css" rel="stylesheet">
		<link href="/css/azkaban.css" rel="stylesheet">

		<script type="text/javascript" src="/js/jquery-1.9.1.js"></script>    
		<script type="text/javascript" src="/js/bootstrap.min.js"></script>    


	</head>
	<body>
		    <script type="text/javascript">
      function navMenuClick(url) {
        window.location.href = url;
      }
    </script>
    <div class="navbar navbar-inverse navbar-static-top">
      <div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<div class="navbar-logo">
						<a href="/">Azkaban</a>
					</div>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
						<li onClick="navMenuClick('overview.html')"><a href="overview.html">Overview</a></li>
						<li class="active" onClick="navMenuClick('/')"><a href="/">Documentation</a></li>
						<li onClick="navMenuClick('downloads.html')"><a href="downloads.html">Downloads</a></li>
						<li onClick="navMenuClick('license.html')"><a href="license.html">License</a></li>
						<li onClick="navMenuClick('contact.html')"><a href="contact.html">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>



		<div class="az-page-header">
			<div class="container">
				<div class="row">
					<div class="col-lg-12">
						<h1></h1>
					</div>
				</div>
			</div>
		</div>

		<div class="container">
			<div class="row">
				<div class="col-md-3">
										<div class="bs-sidebar hidden-print" role="complementary">
						<ul class="bs-sidenav nav">
							<li>
								<a href="#getting-started">Getting Started</a>
								<ul class="nav">
									<li><a href="#database-setup">Database Setup</a></li>
									<li><a href="#webserver-setup">Web Server Setup</a></li>
									<li><a href="#executor-setup">Executor Setup</a></li>
									<li><a href="#plugin-setup">Plugin Setup</a></li>
									<li><a href="#upgrade-21">Upgrade from 2.1</a></li>
								</ul>
							</li>
							<li>
								<a href="#configuration">Configuration</a>
								<ul class="nav">
									<li><a href="#azkaban-webserver">AzkabanWebServer</a></li>
									<li><a href="#azkaban-execserver">AzkabanExecutorServer</a></li>
								</ul>
							</li>
							<li>
								<a href="#user-manager">User Manager</a>
								<ul class="nav">
									<li><a href="#xml-usermanager">XmlUserManager</a></li>
									<li><a href="#custom-usermanager">Custom UserManager</a></li>
								</ul>
							</li>
							<li>
								<a href="#creating-flows">Creating Flows</a>
								<ul class="nav">
									<li><a href="#job-conf">Job Configuration</a></li>
									<li><a href="#builtin-jobtypes">Built-in JobTypes</a></li>
								</ul>
							</li>
							<li>
								<a href="#using-azkaban">Using Azkaban</a>
								<ul class="nav">
									<li><a href="#create-projects">Create Projects</a></li>
									<li><a href="#upload-projects">Upload Projects</a></li>
									<li><a href="#flow-view">Flow View</a></li>
									<li><a href="#project-permissions">Project Permissions</a></li>
									<li><a href="#executing-flows">Executing Flows</a></li>
									<li><a href="#executions">Executions</a></li>
									<li><a href="#job-page">Job Page</a></li>
									<li><a href="#ajax-api">AJAX API</a></li>
								</ul>
							</li>
							<li>
								<a href="#plugins">Plugins</a>
								<ul class="nav">
									<li><a href="#hadoopsecuritymanager">HadoopSecurityManager</a></li>
									<li><a href="#hdfs-browser">HDFS Browser</a></li>
									<li><a href="#jobtype-plugins">JobType Plugins</a></li>
									<li>
										<a href="#jobtypes">JobTypes</a>
										<ul class="nav">
											<li><a href="#command-type">Command</a></li>
											<li><a href="#java-type">Java</a></li>
											<li><a href="#hadoopjava-type">Hadoop Java</a></li>
											<li><a href="#pig-type">Pig</a></li>
											<li><a href="#hive-type">Hive</a></li>
											<li><a href="#voldemortbuildandpush-type">VoldemortBuildAndPush</a></li>
											<li><a href="#create-types">Create Types</a></li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div>


				</div>
				<div class="col-md-9">
					<h1 id="setup_azkaban_plugins">Setup Azkaban Plugins</h1>

<h2 id="plugins">Plugins</h2>

<p>Azkaban is designed to make non-core functionalities plugin-based, so that</p>

<p>a) they can be selectively installed/upgraded in different environments without changing the core Azkaban, and b) it makes Azkaban very easy to be extended for different systems.</p>

<p>Right now, Azkaban allows for a number of different plugins. On web server side, there are</p>

<ul>
<li>viewer plugins that enable custom web pages to add features to Azkaban. Some of the known implementations include HDFS filesystem viewer, and Reportal.</li>

<li>trigger plugins that enable custom triggering methods.</li>

<li>user manager plugin that enables custom user authentication methods. For instance, in LinkedIn we have LDAP based user authentication.</li>

<li>alerter plugins that enable different alerting methods to users, in addition to email based alerting.</li>
</ul>

<p>On executor server side * pluggable job type executors on AzkabanExecutorServer, such as job types for hadoop ecosystem components.</p>

<p>We recommend installing these plugins for the best usage of Azkaban.</p>

<p>A set of common plugins are available to download from the <a href="../../downloads.html">download page</a>.</p>

<p>Alternatively, by cloning the <a href="https://github.com/azkaban/azkaban-plugins">github repo</a>, you can run <em>ant -package</em> in different plugin directories to create tar ball packages.</p>

<p>Below are instructions of how to install these plugins to work with Azkaban.</p>
<hr />
<h2 id="user_manager_plugins">User Manager Plugins</h2>

<p>By default, Azkaban ships with the XMLUserManager class which authenticates users based on a xml file, which is located at <em>conf/azkaban-users.xml</em>. This is not secure and doesn’t serve many users. In real production deployment, you should rely on your own user manager class that suits your need, such as a LDAP based one. The XMLUserManager can still be used for special user accounts and managing user roles. You can find examples of these two cases in the default <em>azkaban-users.xml</em> file.</p>

<p>To install your own user manager class, specify in <em>Azkaban2-web-server-install-dir/conf/azkaban.properties :</em></p>

<pre><code>user.manager.class=MyUserManagerClass</code></pre>

<p>and put the containing jar in <em>plugins</em> directory.</p>

<h2 id="viewer_plugins">Viewer Plugins</h2>

<h3 id="hdfs_viewer_plugins">HDFS Viewer Plugins</h3>

<p>1) HDFS Viewer Plugin should be installed in AzkabanWebServer plugins directory, which is specified in AzkabanWebServer’s config file, for example, in <em>Azkaban2-web-server-install-dir/conf/azkaban.properties :</em></p>

<pre><code>viewer.plugins=hdfs</code></pre>

<p>This tells Azkaban to load hdfs viewer plugin from <em>Azkaban2-web-server-install-dir/plugins/viewer/hdfs</em></p>

<p>2) Extract the <em>azkaban-hdfs-viewer</em> archive to the AzkabanWebServer ./plugins/viewer directory. Rename the directory to <em>hdfs</em>, as specified in step 1).</p>

<p>Depending on if the hadoop installation is turned on, 3a) If the hadoop installation does not have security turned on, the default config is good enough. One can simply restart AzkabanWebServer and start using the hdfs viewer.</p>

<p>3b) If the hadoop installation does have security turned on, the following configs should be set differently than their default values, in plugin’s config file:</p>
<table class="params"><thead><tr><th class="parameter">Parameter</th><th class="description">Description</th></tr></thead><tbody><tr><td style="text-align: left;">azkaban.should.proxy</td><td style="text-align: left;">Wether Azkaban should proxy as another user to view the hdfs filesystem, rather than Azkaban itself, defaults to <em>true</em></td></tr>
<tr><td style="text-align: left;">hadoop.security.manager.class</td><td style="text-align: left;">The security manager to be used, which handles talking to secure hadoop cluster, defaults to <em>azkaban.security.HadoopSecurityManager_H_1_0</em> (for hadoop 1.x versions)</td></tr>
<tr><td style="text-align: left;">proxy.user</td><td style="text-align: left;">The Azkaban user configured with kerberos and hadoop. Similar to how oozie should be configured, for secure hadoop installations</td></tr>
<tr><td style="text-align: left;">proxy.keytab.location</td><td style="text-align: left;">The location of the keytab file with which Azkaban can authenticate with Kerberos for the specified proxy.user</td></tr>
</tbody></table>
<p>For more Hadoop security related information, see <a href="./hadoopsecuritymanager.html">HadoopSecurityManager</a></p>

<h2 id="job_type_plugins">Job Type Plugins</h2>

<p>Azkaban has a limited set of built-in job types to run local unix commands and simple java programs. In most cases, you will want to install additional job type plugins, for example, hadoopJava, Pig, Hive, VoldemortBuildAndPush, etc. Some of the common ones are included in azkaban-jobtype archive. Here is how to install:</p>

<p>1) Job type plugins should be installed with AzkabanExecutorServer’s plugins directory, and specified in AzkabanExecutorServer’s config file, for example, in <em>Azkaban2-exec-server-install-dir/conf/azkaban.properties :</em></p>

<pre><code>azkaban.jobtype.plugin.dir=plugins/jobtypes</code></pre>

<p>This tells Azkaban to load all job types from <em>Azkaban2-exec-server-install-dir/plugins/jobtypes</em></p>

<p>2) Extract the archive into AzkabanExecutorServer <em>./plugins/</em> directory, rename it to <em>jobtypes</em> as specified in step 1).</p>

<p>The following setting is often needed when you run Hadoop Jobs:</p>
<table class="params"><thead><tr><th class="parameter">Parameter</th><th class="description">Description</th></tr></thead><tbody><tr><td style="text-align: left;">hadoop.home</td><td style="text-align: left;">Your \$HADOOP_HOME setting.</td></tr>
<tr><td style="text-align: left;">jobtype.global.classpath</td><td style="text-align: left;">The cluster specific hadoop resources, such as hadoop-core jar, and hadoop conf (e.g. \${hadoop.home}/hadoop-core-1.0.4.jar,\${hadoop.home}/conf)</td></tr>
</tbody></table>
<p>Depending on if the hadoop installation is turned on, 3a) If the hadoop installation does not have security turned on, you can likely rely on the default settings.</p>

<p>3b) If the Hadoop installation does have kerberos authentication turned on, you need to fill out the following hadoop settings:</p>
<table class="params"><thead><tr><th class="parameter">Parameter</th><th class="description">Description</th></tr></thead><tbody><tr><td style="text-align: left;">hadoop.security.manager.class</td><td style="text-align: left;">The security manager to be used, which handles talking to secure hadoop cluster, defaults to <em>azkaban.security.HadoopSecurityManager_H_1_0</em> (for hadoop 1.x versions)</td></tr>
<tr><td style="text-align: left;">proxy.user</td><td style="text-align: left;">The Azkaban user configured with kerberos and hadoop. Similar to how oozie should be configured, for secure hadoop installations</td></tr>
<tr><td style="text-align: left;">proxy.keytab.location</td><td style="text-align: left;">The location of the keytab file with which Azkaban can authenticate with Kerberos for the specified proxy.user</td></tr>
</tbody></table>
<p>For more Hadoop security related information, see <a href="./hadoopsecuritymanager.html">HadoopSecurityManager</a></p>

<p>4) Start the executor, watch for error messages and check executor server log. For job type plugins, the executor should do minimum testing and let you know if it is properly installed.</p>
				</div>
			</div>
		</div>

		<script>
			$(function(){
				$(document.body).scrollspy({
					target: '.bs-sidebar'
				});
			 // back to top
				setTimeout(function () {
					var $sideBar = $('.bs-sidebar')
					$sideBar.affix({
						offset: {
							top: function () {
								var navOuterHeight = $('.navbar').height();
								var headerHeight = $('.az-page-header').height();

								return (this.top = navOuterHeight + headerHeight);
							},
							bottom: function () {
								return (this.bottom = $('.page-footer').outerHeight(true));
							}
						}
					});
				}, 100)
			});
		</script>

				<div class="page-footer">
			<div class="container">
				<div class="row">
					<div class="col-xs-12">
						<ul class="footer-nav">
							<li><a href="/">Documentation</a></li>
							<li><a href="downloads.html">Downloads</a></li>
							<li><a href="https://github.com/azkaban/azkaban2/issues">Issues</a></li>
							<li><a href="https://github.com/azkaban/azkaban2">Repository</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>


	</body>
</html>

