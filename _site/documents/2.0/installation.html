<h1 id="installation">Installation</h1>

<p>Azkaban2 is fairly easy to set up, although has more moving pieces than its predecessor. There are three servers that need to be setup:</p>

<ul>
<li><strong>MySQL instance</strong> - Azkaban uses MySQL to store projects and executions</li>

<li><strong>Azkaban Web Server</strong> - Azkaban Web Server is a Jetty server which acts as the controller as well as the web interface</li>

<li><strong>Azkaban Executor Server</strong> - Azkaban Executor Server executes submitted workflow.</li>
</ul>

<p>You can download Azkaban tars from the following link: <a href="downloads.html">Download Packages</a></p>

<h2 id="setting_up_the_db">Setting up the DB</h2>

<p>Currently, Azkaban2 only uses MySQL as its data store. Installation of MySQL DB is not covered in this guide.</p>

<ol>
<li>Download the <em>azkaban-sql-script</em> tar. Contained in this archive are table creation scripts.</li>

<li>Run the scripts on the MySQL instance to create your tables.</li>
</ol>

<h2 id="getting_the_jdbc_connector_jar">Getting the JDBC Connector jar</h2>

<p>For various licensing reasons, Azkaban does not distribute the MySQL JDBC connector jar. You can download the jar from this link: <a href="http://www.mysql.com/downloads/connector/j/">http://www.mysql.com/downloads/connector/j/</a>. This jar will be needed for both the web server and the executor server.</p>

<h2 id="setup_the_web_server">Setup the Web Server</h2>

<h3 id="download_and_install">Download and Install</h3>

<ol>
<li>Download the <em>azkaban-web-server</em> tar. Extract it into your azkaban install directory.</li>

<li>Copy the jdbc jar into <em>./extlib</em> directory. Azkaban will automatically look to this directory for external (non-distributed) jars.</li>
</ol>

<p>In the conf dir, there should be several files:</p>

<ul>
<li><strong>azkaban.properties</strong> - Used by Azkaban for runtime paramaters</li>

<li><strong>global.properties</strong> - Global static properties that are passed as shared properties to every workflow and job.</li>

<li><strong>azkaban-users.xml</strong> - Used to add users and roles for authentication. This file is not used if the XmLUserManager is not set up to use it.</li>
</ul>

<h3 id="setting_up_ssl">Setting up SSL</h3>

<p>Azkaban uses SSL socket connectors, which means a keystore will have to be available. You call follow the steps provided at this link (<a href="http://docs.codehaus.org/display/JETTY/How+to+configure+SSL">http://docs.codehaus.org/display/JETTY/How+to+configure+SSL</a>) to create one. Once a keystore file has been created, Azkaban must be given its location and password. Within <em>azkaban.properties</em>, the following properties should be overridden.</p>

<pre><code>    jetty.keystore=keystore
    jetty.password=password
    jetty.keypassword=password
    jetty.truststore=keystore
    jetty.trustpassword=password</code></pre>

<h3 id="setting_up_the_usermanager">Setting up the UserManager</h3>

<p>Azkaban uses the UserManager to provide authentication and user roles. By default, Azkaban includes and uses the <em>XmlUserManager</em> which gets username/passwords and roles from the <em>azkaban-users.xml</em> as can be seen in the <em>azkaban.properties</em> file.</p>

<ul>
<li><code>user.manager.class=azkaban.user.XmlUserManager</code></li>

<li><code>user.manager.xml.file=conf/azkaban-users.xml</code></li>
</ul>

<p>The following is an example of the contents of the <em>azkaban-users.xml</em> file.</p>

<pre><code>	&lt;azkaban-users&gt;    
		&lt;user username=&quot;azkaban&quot; password=&quot;azkaban&quot; roles=&quot;admin&quot; groups=&quot;azkaban&quot;/&gt;    
		&lt;role name=&quot;admin&quot; permissions=&quot;ADMIN&quot; /&gt;    
	&lt;/azkaban-user&gt;    </code></pre>

<p>It is possible to override the UserManager to use other methods of authentication (i.e. DB, JNDI, Ldap etc) by including your own implementation of the <em>azkaban.user.UserManager</em> interface and changing the <em>user.manager.class</em> property.</p>

<h3 id="setting_up_the_db_2">Setting up the DB</h3>

<p>To point Azkaban web client to the MySQL instance, you will need to configure the following properties in <em>azkaban.properties</em>.</p>

<pre><code>    database.type=mysql
    mysql.port=3306
    mysql.host=localhost
    mysql.database=azkaban2
    mysql.user=azkaban
    mysql.password=azkaban
    mysql.numconnections=100</code></pre>

<p>Currently MySQL is the only data store type supported in Azkaban. So <em>database.type</em> should always be <em>mysql</em>.</p>

<h3 id="setting_up_web_client">Setting up Web Client</h3>

<p>Azkaban allows various property changes.</p>